<!DOCTYPE html>
<html lang="en" class="relative min-h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Barbershop Booking</title>
    <!-- Importing Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    {% load static %}
</head>
<body class="text-gray-800 relative min-h-full {% if request.path != '/dashboard/' %}bg-cover bg-center bg-no-repeat bg-opacity-10 backdrop-blur-lg{% endif %}">

    <!-- ========== HEADER ========== -->
    {% block header %}
    <header class="flex items-center justify-between bg-white p-4 shadow-md">
        <!-- Business Info as Logo and Name -->
        <div class="relative">
            <button class="flex items-center focus:outline-none" id="business-dropdown">
                <img src="" id="business-logo" alt="Business Logo" class="w-10 h-10 rounded-full object-cover mr-3">
                <span id="business-name" class="text-gray-800 font-medium">Business Name</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>
        
            <!-- Dropdown content -->
            <div id="business-info" class="hidden absolute bg-white shadow-lg rounded-lg mt-2 w-56 p-4">
                <div class="text-sm text-gray-800">
                    <p id="business-address"><strong></strong> 123 Main St</p>
                    <p id="business-email"><strong>Email:</strong> business@example.com</p>
                    <p id="business-phone"><strong>Phone:</strong> 123-456-7890</p>
                    <a href="/edit" class="block mt-2 text-blue-500 hover:text-blue-700">Settings</a>
                </div>
            </div>
        </div>
        
        <!-- Navbar links -->
        <nav class="flex items-center space-x-4">
        
            <a href="{% url 'orders_history' %}" class="px-3 py-2 text-sm text-gray-800 hover:text-gray-600">Orders</a>
            <a href="{% url 'dashboard' %}" class="px-3 py-2 text-sm text-gray-800 hover:text-gray-600">Dashboard</a>
            <a href="#" onclick="logout()" class="px-3 py-2 text-sm text-gray-800 hover:text-gray-600">Logout</a>
        </nav>
    </header>
    {% endblock %}
    <!-- ========== END HEADER ========== -->

    <!-- Main Content Section -->
    <main class="container mx-auto px-4 py-6 min-h-screen md:py-12 md:px-8">
        {% block content %}
        {% endblock %}
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="bg-gray-200 text-center py-4 mt-auto">
        <div class="container mx-auto">
            <p class="text-gray-700">Â© 2023 Barbershop Booking System</p>
        </div>
    </footer>
    <!-- ========== END FOOTER ========== -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.5.2/cdn.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userId = localStorage.getItem('userId');
            const authLinks = document.getElementById('auth-links');
            if (userId) {
                authLinks.innerHTML = `
                    <a href="{% url 'orders_history' %}" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50">Orders</a>
                    <a href="{% url 'dashboard' %}" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50">Dashboard</a>
                    <a href="#" onclick="logout()" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50">Logout</a>
                `;
            } else {
                authLinks.innerHTML = `
                    <a href="{% url 'about' %}" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50">About</a>
                    <a href="{% url 'login' %}" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50">Login</a>
                `;
            }
        });

        function logout() {
            // Remove userId from local storage
            localStorage.removeItem('userId');
            
            // Redirect to login page
            window.location.href = "/login"; // Change this URL to your actual login page
        }
    </script>

    {% block scripts %}{% endblock %}
</body>

<script>
    // Show/Hide business info dropdown
    document.getElementById('business-dropdown').addEventListener('click', function() {
        const dropdown = document.getElementById('business-info');
        dropdown.classList.toggle('hidden');
    });

    // Close dropdown when clicked outside
    window.addEventListener('click', function(e) {
        const dropdown = document.getElementById('business-info');
        if (!e.target.closest('#business-dropdown')) {
            dropdown.classList.add('hidden');
        }
    });
</script>

</html>
